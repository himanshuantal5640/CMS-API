<!DOCTYPE html>
<html>
<head>
  <title>Socket Test</title>
</head>
<body>

<h3>Live Chat Test</h3>

<input id="userId" placeholder="Your User ID" />
<button onclick="connectUser()">Connect</button>

<br><br>

<input id="receiverId" placeholder="Receiver ID" />
<input id="message" placeholder="Message" />
<button onclick="sendMessage()">Send</button>

<div id="messages"></div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

<script>
  const socket = io("http://localhost:3000");

  function connectUser() {
    const userId = document.getElementById("userId").value;
    socket.emit("user-online", userId);
  }

  function sendMessage() {
    const senderId = document.getElementById("userId").value;
    const receiverId = document.getElementById("receiverId").value;
    const message = document.getElementById("message").value;

    socket.emit("send-message", {
      senderId,
      receiverId,
      message
    });
  }

  socket.on("receive-message", (data) => {
    appendMessage("Received: " + data.message);
  });

  socket.on("message-sent", (data) => {
    appendMessage("Sent: " + data.message);
  });

  function appendMessage(text) {
    const div = document.createElement("div");
    div.innerText = text;
    document.getElementById("messages").appendChild(div);
  }
</script>

</body>
</html>